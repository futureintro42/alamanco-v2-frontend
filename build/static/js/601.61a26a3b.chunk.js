"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[601],{6601:(e,n,r)=>{r.r(n),r.d(n,{default:()=>P});var a=r(8903),s=r(5043),t=r(3216),i=r(6410),u=r(9252),o=r(2110),d=r(6494),m=r(7254),l=r(5865),c=r(1906),p=r(4858),h=r(1881),x=r(8403),j=r(6446),q=r(7784),v=r(1673),f=r(4605),A=r(1962),y=r(903),C=r(7343),_=r(9351),w=r(9456),b=r(579);const g=e=>{var n,r,t,i;let{_id:u,first_name:o,last_name:d,role:l}=e;const g=(0,w.d4)((e=>e.auth)),Y=!(null===g||void 0===g||!g.isLoggedIn||"admin"!==(null===g||void 0===g?void 0:g.role)),[$,I]=s.useState(""),[P,M]=s.useState(""),[O,S]=s.useState(!1),[k,E]=s.useState("ADMIN"===l),[N,{loading:J,error:D,data:U}]=(0,h.n)(_.ab),{register:L,handleSubmit:z,setError:R,setValue:Z,formState:{errors:B}}=(0,p.mN)({resolver:(0,x.t)(y.Cx)});s.useEffect((()=>{const e="ADMIN"===l;Z("first_name",o),Z("last_name",d),Z("role",e),E(e)}),[o,d,l,Z]);return s.useEffect((()=>{if(!J&&!D&&U){const e=U.updateProfile;I(e.severity),M(e.message),(0,C.ft)(e.error,R),S(!1)}}),[J,D,U,I,M,R]),(0,b.jsx)(j.A,{component:"form",onSubmit:z(((e,n)=>{n.preventDefault(),S(!0);const r={_id:u,first_name:e.first_name,last_name:e.last_name,role:Y?e.role?"ADMIN":"USER":l};N({variables:{input:r}})})),noValidate:!0,sx:{mt:1},autoComplete:"off",children:(0,b.jsxs)(a.Ay,{container:!0,children:[(0,b.jsx)(a.Ay,{container:!0,spacing:2,sx:{mb:2},children:$&&P&&(0,b.jsx)(a.Ay,{item:!0,xs:12,children:(0,b.jsx)(m.A,{variant:"standard",severity:$,sx:{width:"100%",mt:1},children:P})})}),(0,b.jsxs)(a.Ay,{item:!0,xs:12,sx:{mb:2},children:[(0,b.jsx)(q.A,{autoComplete:"given-name",name:"first_name",required:!0,fullWidth:!0,id:"first_name",label:"First Name",autoFocus:!0,error:!(null===B||void 0===B||null===(n=B.first_name)||void 0===n||!n.message),...L("first_name")}),(null===B||void 0===B?void 0:B.first_name)&&(0,b.jsx)(v.A,{error:!0,id:"email-error",children:null===B||void 0===B||null===(r=B.first_name)||void 0===r?void 0:r.message})]}),(0,b.jsxs)(a.Ay,{item:!0,xs:12,children:[(0,b.jsx)(q.A,{required:!0,fullWidth:!0,id:"last_name",label:"Last Name",name:"last_name",autoComplete:"family-name",error:!(null===B||void 0===B||null===(t=B.last_name)||void 0===t||!t.message),...L("last_name")}),(null===B||void 0===B?void 0:B.last_name)&&(0,b.jsx)(v.A,{error:!0,id:"email-error",children:null===B||void 0===B||null===(i=B.last_name)||void 0===i?void 0:i.message})]}),Y&&(0,b.jsx)(a.Ay,{item:!0,xs:12,children:(0,b.jsx)(f.A,{control:(0,b.jsx)(A.A,{defaultChecked:k,...L("role")}),label:"Set as Admin"})}),(0,b.jsx)(a.Ay,{item:!0,xs:12,children:(0,b.jsx)(c.A,{type:"submit",variant:"contained",sx:{mt:3,mb:2,width:"100%"},"aria-label":"signup button",disabled:O,children:"Update Profile"})})]})})};g.defaultProps={_id:"",first_name:"",last_name:"",role:""};const Y=g;var $=r(2010);const I=()=>{const{id:e}=(0,t.g)(),[n,r]=s.useState("error"),[p,h]=s.useState(""),[x,j]=s.useState(!1),[q,v]=s.useState({_id:"",first_name:"",last_name:"",email:"",status:"",role:""}),[f,{loading:A,error:y,data:C}]=(0,i._)($.q2);s.useEffect((()=>{f({variables:{input:{_id:e}}})}),[e,f]),s.useEffect((()=>{if(!A&&!y&&C){const e=C.userDetails;if(e.response){r(""),h("");const{_id:n,first_name:a,last_name:s,email:t,role:i,status:u}=e.response;v({_id:n,first_name:a,last_name:s,email:t,role:i,status:u.toLowerCase()})}else r("error"),h("Sorry, Record does not exist.")}}),[A,y,C]);return(0,b.jsx)(u.A,{sx:{p:0},children:(0,b.jsx)(o.A,{children:(0,b.jsxs)(d.A,{children:[(0,b.jsx)(a.Ay,{item:!0,xs:12,children:n&&p&&(0,b.jsx)(a.Ay,{item:!0,xs:12,children:(0,b.jsx)(m.A,{variant:"standard",severity:n,sx:{width:"100%",mt:1},children:p})})}),q.first_name&&(0,b.jsxs)(a.Ay,{container:!0,children:[(0,b.jsx)(a.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsxs)(a.Ay,{container:!0,children:[(0,b.jsx)(a.Ay,{item:!0,xs:4,children:(0,b.jsx)(l.A,{variant:"h5",component:"h5",children:"First Name"})}),(0,b.jsx)(a.Ay,{item:!0,xs:8,children:(0,b.jsx)(l.A,{variant:"h5",component:"h5",children:q.first_name})}),(0,b.jsx)(a.Ay,{item:!0,xs:4,children:(0,b.jsx)(l.A,{variant:"h5",component:"h5",children:"Last Name"})}),(0,b.jsx)(a.Ay,{item:!0,xs:8,children:(0,b.jsx)(l.A,{variant:"h5",component:"h5",children:q.last_name})}),(0,b.jsx)(a.Ay,{item:!0,xs:4,children:(0,b.jsx)(l.A,{variant:"h5",component:"h5",children:"Email"})}),(0,b.jsx)(a.Ay,{item:!0,xs:8,children:(0,b.jsx)(l.A,{variant:"h5",component:"h5",children:q.email})}),(0,b.jsx)(a.Ay,{item:!0,xs:4,children:(0,b.jsx)(l.A,{variant:"h5",component:"h5",children:"Status"})}),(0,b.jsx)(a.Ay,{item:!0,xs:8,children:(0,b.jsx)(l.A,{variant:"h5",component:"h5",sx:{textTransform:"capitalize"},children:q.status})})]})}),(0,b.jsx)(a.Ay,{item:!0,xs:12,sm:6,children:(0,b.jsxs)(a.Ay,{container:!0,children:[(0,b.jsx)(a.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,b.jsx)(c.A,{variant:"text",onClick:e=>{e.preventDefault(),j(!x)},children:x?"Cancel Profile":"Update profile"})}),x&&(0,b.jsx)(a.Ay,{item:!0,xs:12,children:(0,b.jsx)(Y,{...q})})]})})]})]})})})},P=()=>(0,b.jsx)(a.Ay,{container:!0,spacing:3,children:(0,b.jsx)(a.Ay,{item:!0,xs:12,children:(0,b.jsx)(I,{})})})},9351:(e,n,r)=>{r.d(n,{G6:()=>_,Hx:()=>f,Tx:()=>C,Ur:()=>y,Zs:()=>w,ab:()=>P,iO:()=>$,lj:()=>I,ox:()=>A,rF:()=>M,tz:()=>g,xt:()=>Y,yJ:()=>O,y_:()=>b});var a,s,t,i,u,o,d,m,l,c,p,h,x,j,q=r(7528),v=r(459);const f=(0,v.J1)(a||(a=(0,q.A)(["\n  mutation signup($input: signupInput!) {\n    signup(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),A=(0,v.J1)(s||(s=(0,q.A)(["\n  mutation changeStatus($input: idInput!) {\n    changeStatus(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"]))),y=(0,v.J1)(t||(t=(0,q.A)(["\n  mutation removeUser($input: idInput!) {\n    removeUser(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"]))),C=(0,v.J1)(i||(i=(0,q.A)(["\n  mutation createInvoice($input: invoiceInput!) {\n    createInvoice(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),_=(0,v.J1)(u||(u=(0,q.A)(["\n  mutation updateInvoice($input: invoiceInput!) {\n    updateInvoice(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),w=(0,v.J1)(o||(o=(0,q.A)(["\n  mutation setPassword($input: setPasswordInput!) {\n    setPassword(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),b=(0,v.J1)(d||(d=(0,q.A)(["\n  mutation createCard($input: cardInput!) {\n    createCard(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),g=(0,v.J1)(m||(m=(0,q.A)(["\n  mutation updateCard($input: cardInput!) {\n    updateCard(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),Y=(0,v.J1)(l||(l=(0,q.A)(["\n  mutation changeCardStatus($input: idInput!) {\n    changeCardStatus(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"]))),$=(0,v.J1)(c||(c=(0,q.A)(["\n  mutation changeInvoiceStatus($input: idInput!) {\n    changeInvoiceStatus(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"]))),I=(0,v.J1)(p||(p=(0,q.A)(["\n  mutation changePassword($input: changePasswordInput!) {\n    changePassword(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),P=(0,v.J1)(h||(h=(0,q.A)(["\n  mutation updateProfile($input: updateProfileInput!) {\n    updateProfile(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),M=(0,v.J1)(x||(x=(0,q.A)(["\n  mutation removeCard($input: objIdInput!) {\n    removeCard(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"]))),O=(0,v.J1)(j||(j=(0,q.A)(["\n  mutation removeInvoice($input: objIdInput!) {\n    removeInvoice(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"])))},903:(e,n,r)=>{r.d(n,{Cx:()=>m,E9:()=>i,O5:()=>s,V8:()=>u,X5:()=>t,jK:()=>o,nM:()=>l,uk:()=>d});var a=r(899);const s=a.Ik().shape({first_name:a.Yj().min(3).max(150).required("Please enter first name"),last_name:a.Yj().min(3).max(150).required("Please enter last name"),email:a.Yj().max(150).email("Please indicate a valid email address.").required("Please enter email address."),password:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number"),confirmPassword:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number").oneOf([a.KR("password"),null],"Passwords don't match!").required("Please enter confirm password")}),t=a.Ik().shape({email:a.Yj().email("Must be a valid email").max(150).required("Email is required"),password:a.Yj().required("Please enter password")}).required(),i=a.Ik().shape({email:a.Yj().email("Must be a valid email").max(150).required("Email is required")}).required(),u=a.Ik().shape({password:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number"),confirmPassword:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number").oneOf([a.KR("password"),null],"Passwords don't match!").required("Please enter confirm password")}),o=a.Ik().shape({sticker_number:a.Yj().max(30).required("Strike number is required"),reference_number:a.Yj().max(30).required("Reference Number is required"),equipment_type:a.Yj().max(30).required("Equipment type is required"),equipment_description:a.Yj().max(200).required("Equipment description is required"),make:a.Yj().max(150).required("Make is required"),serial_number:a.Yj().max(100).required("Serial number is required"),year_of_manufacturing:a.Yj().max(30).required("Year of manufacturing is required"),plant_number:a.Yj().max(100).required("Plant number is required"),location_of_equipment:a.Yj().max(30).required("Location of the equipment is required"),owner_business_name:a.Yj().max(150).required("Owner's Business name is required"),owner_business_address:a.Yj().max(200).required("Owner's Business address is required"),details:a.Yj().max(200).required("details is required"),standard_specification:a.Yj().max(200).required("Standard Specification is required"),business_name:a.Yj().max(100).required("Business name is required"),business_address:a.Yj().max(200).required("Business address is required"),inspection_date:a.Yj().max(30).required("Inspection date is required"),inspection_next_date:a.Yj().max(30).required("Inspection next date is required"),inspector_name:a.Yj().max(100).required("Inspector's name is required"),resultStatus:a.Yj().required("resultStatus is required")}),d=a.Ik().shape({name:a.Yj().max(150).required("Card holder name is required"),iqama_number:a.Yj().max(100).required("Iqama Number is required"),issue_date:a.Yj().max(30).required("Issue date is required"),expiry_date:a.Yj().max(30).required("Expiry date is required"),certified_as:a.Yj().max(100).required("Certified as is required"),company:a.Yj().max(100).required("Company as is required"),examiner:a.Yj().max(100).required("Examiner as is required"),profile_pic:a.Yj().nullable().notRequired()}),m=a.Ik().shape({first_name:a.Yj().min(3).max(150).required("Please enter first name"),last_name:a.Yj().min(3).max(150).required("Please enter last name"),role:a.zM().nullable().notRequired()}),l=a.Ik().shape({oldPassword:a.Yj().required("Please Enter your old password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number"),password:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number"),confirmPassword:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number").oneOf([a.KR("password"),null],"Passwords don't match!").required("Please enter confirm password")})}}]);
//# sourceMappingURL=601.61a26a3b.chunk.js.map