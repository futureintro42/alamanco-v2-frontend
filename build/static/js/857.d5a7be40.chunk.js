"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[857],{7857:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var r=a(5043),s=a(4858),i=a(8403),n=a(1881),c=a(3216),o=a(2356),l=a(903),u=a(9351),p=a(7343),d=a(579);const m=()=>{const e=(0,c.Zp)(),[t,a]=r.useState("error"),[m,f]=r.useState(""),[g,_]=r.useState(""),[y,S]=r.useState(""),[b,x]=r.useState(!1),[h,{loading:v,error:C,data:j}]=(0,n.n)(u.y_),{register:k,handleSubmit:F,setError:H,resetField:q,formState:{errors:w}}=(0,s.mN)({resolver:(0,i.t)(l.uk)});r.useEffect((()=>{if(!v&&!C&&j){const t=j.createCard;a(t.severity),f(t.message),(0,p.ft)(t.error,H),x(!1),!t.error&&t.severity.includes("success")&&e("/cards")}}),[v,C,j,a,f,H,e]);return(0,d.jsx)(o.A,{handleSubmit:F,onSubmitHandler:(e,t)=>{t.preventDefault();const{name:a,iqama_number:r,certified_as:s,company:i,examiner:n}=e;let c=e.issue_date.split("/");c="".concat(c[2],"-").concat(c[1],"-").concat(c[0]);let o=e.expiry_date.split("/");o="".concat(o[2],"-").concat(o[1],"-").concat(o[0]),h({variables:{input:{_id:"",name:a,iqama_number:r,certified_as:s,issue_date:c,expiry_date:o,company:i,examiner:n,profile_pic:y}}})},register:k,errors:w,severity:t,message:m,isSubmitted:b,title:"Create Card",submitBtnTxt:"Create",issue_date:"",expiry_date:"",onChangeFileHandler:e=>{const{files:t}=e.target;if(t&&t[0]){const{name:a,size:r}=t[0],s=r/1024/1024;/(\.jpg|\.jpeg|\.png|\.gif)$/i.exec(a)?s>5?H("profile_pic",{type:"manual",message:"File size exceeds 5 MiB"}):(0,p.Hm)(e.target).then((e=>{_(e),S(e),q("profile_pic")})).catch((e=>console.error(e))):H("profile_pic",{type:"manual",message:"Please you can upload file having extensions .jpeg/.jpg/.png/.gif only."})}},imageSrc:g})}}}]);
//# sourceMappingURL=857.d5a7be40.chunk.js.map