"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[967],{2967:(e,r,n)=>{n.r(r),n.d(r,{default:()=>O});var a=n(5043),t=n(8903),s=n(3216),i=n(9456),o=n(722),d=n(4858),u=n(1881),l=n(8403),c=n(9252),m=n(2110),p=n(6494),h=n(6446),v=n(1045),x=n(5865),w=n(7254),f=n(3193),b=n(9190),j=n(4050),q=n(1787),A=n(7392),C=n(1673),g=n(1906),y=n(8446),P=n(6325),I=n(5940),M=n(3632),Y=n(9351),E=n(903),$=n(7343),k=n(579);const S=()=>{var e,r,n,i;const S=(0,s.Zp)(),{token:O=""}=(0,s.g)(),[_,L]=a.useState(!1),[N,z]=a.useState(!1),[J,D]=a.useState("error"),[R,Z]=a.useState(""),[U,K]=a.useState(!1),[V,B]=a.useState(""),[T,F]=a.useState("Please click on I'm not a robot."),[Q,{loading:G,error:H,data:W}]=(0,u.n)(Y.Zs),{register:X,handleSubmit:ee,setError:re,formState:{errors:ne}}=(0,d.mN)({resolver:(0,l.t)(E.V8)}),ae=()=>{B(""),F("Please click on I'm not a robot")};return a.useEffect((()=>{if(!G&&!H&&W){const e=W.setPassword;D(e.severity),Z(e.message),(0,$.ft)(e.error,re),K(!1),!e.error&&e.severity.includes("success")&&S("/login")}}),[G,H,W,re,S,K]),(0,k.jsx)(c.A,{maxWidth:!1,sx:{maxWidth:"600px"},children:(0,k.jsx)(m.A,{sx:{mt:10,border:1,borderColor:"primary.dark"},children:(0,k.jsx)(p.A,{children:(0,k.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,k.jsx)(v.A,{sx:{bgcolor:"secondary.main"},children:(0,k.jsx)(P.A,{})}),(0,k.jsx)(x.A,{component:"h1",variant:"h2",children:"Set Password"}),(0,k.jsxs)(h.A,{component:"form",onSubmit:ee(((e,r)=>{r.preventDefault(),K(!0),O?V?Q({variables:{input:{...e,token:O}}}):F("Please click on I'm not a robot"):(D("error"),Z("Token is invalid!")),K(!1)})),noValidate:!0,sx:{mt:1},autoComplete:"off",children:[J&&R&&(0,k.jsx)(w.A,{variant:"standard",severity:J,sx:{width:"100%",mt:1},children:R}),(0,k.jsxs)(f.A,{variant:"outlined",autoComplete:"off",margin:"normal",sx:{width:"100%"},children:[(0,k.jsx)(b.A,{htmlFor:"password","aria-label":"password",required:!0,children:"New Password"}),(0,k.jsx)(j.A,{id:"password",type:_?"text":"password",endAdornment:(0,k.jsx)(q.A,{position:"end",children:(0,k.jsx)(A.A,{"aria-label":"toggle password visibility",onClick:()=>L((e=>!e)),onMouseDown:e=>{e.preventDefault()},edge:"end",children:_?(0,k.jsx)(I.A,{}):(0,k.jsx)(M.A,{})})}),label:"New Password",autoComplete:"off","aria-describedby":"password-error",error:!(null===ne||void 0===ne||null===(e=ne.password)||void 0===e||!e.message),...X("password",{required:"Password is required"})}),(null===ne||void 0===ne?void 0:ne.password)&&(0,k.jsx)(C.A,{error:!0,id:"password-error",children:null===ne||void 0===ne||null===(r=ne.password)||void 0===r?void 0:r.message})]}),(0,k.jsxs)(f.A,{variant:"outlined",autoComplete:"off",margin:"normal",sx:{width:"100%"},children:[(0,k.jsx)(b.A,{htmlFor:"confirmPassword","aria-label":"Confirm Password",required:!0,children:"Confirm New Password"}),(0,k.jsx)(j.A,{id:"confirmPassword",type:N?"text":"password",endAdornment:(0,k.jsx)(q.A,{position:"end",children:(0,k.jsx)(A.A,{"aria-label":"toggle password visibility",onClick:()=>z((e=>!e)),onMouseDown:e=>{e.preventDefault()},edge:"end",children:N?(0,k.jsx)(I.A,{}):(0,k.jsx)(M.A,{})})}),label:"Confirm New Password",autoComplete:"off","aria-describedby":"password-error",error:!(null===ne||void 0===ne||null===(n=ne.confirmPassword)||void 0===n||!n.message),...X("confirmPassword",{required:"Password is required"})}),(null===ne||void 0===ne?void 0:ne.confirmPassword)&&(0,k.jsx)(C.A,{error:!0,id:"password-error",children:null===ne||void 0===ne||null===(i=ne.confirmPassword)||void 0===i?void 0:i.message})]}),(0,k.jsxs)(f.A,{variant:"outlined",autoComplete:"off",margin:"normal",sx:{width:"100%"},children:[(0,k.jsx)(o.A,{sitekey:"".concat("6LfQeaYoAAAAAMZaQJxuVKuB_IrcLEwzcmx6VbqX"),onChange:e=>(B(e||""),void F("")),onExpired:()=>ae(),onErrored:()=>ae()}),T&&(0,k.jsx)(w.A,{variant:"standard",severity:"error",sx:{width:"100%",mt:1},children:T})]}),(0,k.jsx)(g.A,{type:"submit",variant:"contained",sx:{mt:3,mb:2,width:"100%"},"aria-label":"forgot password button",disabled:U,children:"Submit"}),(0,k.jsxs)(t.Ay,{container:!0,children:[(0,k.jsx)(t.Ay,{item:!0,xs:12,sm:6,children:(0,k.jsx)(y.A,{href:"/sign-up",variant:"body1","aria-label":"signup link",children:"Create Account?"})}),(0,k.jsx)(t.Ay,{item:!0,xs:12,sm:6,sx:{display:"flex",justifyContent:"flex-end"},children:(0,k.jsx)(y.A,{href:"/login",variant:"body1","aria-label":"Login link",children:"Already have a account"})})]})]})]})})})})},O=()=>{const e=(0,s.Zp)(),r=(0,i.d4)((e=>e.auth)),{isLoggedIn:n}=r;return(0,a.useEffect)((()=>{n&&e("/dashboard")}),[n,e]),(0,k.jsx)(t.Ay,{container:!0,spacing:3,children:(0,k.jsx)(t.Ay,{item:!0,xs:12,children:(0,k.jsx)(S,{})})})}},9351:(e,r,n)=>{n.d(r,{G6:()=>C,Hx:()=>b,Tx:()=>A,Ur:()=>q,Zs:()=>g,ab:()=>E,iO:()=>M,lj:()=>Y,ox:()=>j,rF:()=>$,tz:()=>P,xt:()=>I,yJ:()=>k,y_:()=>y});var a,t,s,i,o,d,u,l,c,m,p,h,v,x,w=n(7528),f=n(459);const b=(0,f.J1)(a||(a=(0,w.A)(["\n  mutation signup($input: signupInput!) {\n    signup(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),j=(0,f.J1)(t||(t=(0,w.A)(["\n  mutation changeStatus($input: idInput!) {\n    changeStatus(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"]))),q=(0,f.J1)(s||(s=(0,w.A)(["\n  mutation removeUser($input: idInput!) {\n    removeUser(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"]))),A=(0,f.J1)(i||(i=(0,w.A)(["\n  mutation createInvoice($input: invoiceInput!) {\n    createInvoice(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),C=(0,f.J1)(o||(o=(0,w.A)(["\n  mutation updateInvoice($input: invoiceInput!) {\n    updateInvoice(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),g=(0,f.J1)(d||(d=(0,w.A)(["\n  mutation setPassword($input: setPasswordInput!) {\n    setPassword(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),y=(0,f.J1)(u||(u=(0,w.A)(["\n  mutation createCard($input: cardInput!) {\n    createCard(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),P=(0,f.J1)(l||(l=(0,w.A)(["\n  mutation updateCard($input: cardInput!) {\n    updateCard(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),I=(0,f.J1)(c||(c=(0,w.A)(["\n  mutation changeCardStatus($input: idInput!) {\n    changeCardStatus(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"]))),M=(0,f.J1)(m||(m=(0,w.A)(["\n  mutation changeInvoiceStatus($input: idInput!) {\n    changeInvoiceStatus(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"]))),Y=(0,f.J1)(p||(p=(0,w.A)(["\n  mutation changePassword($input: changePasswordInput!) {\n    changePassword(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),E=(0,f.J1)(h||(h=(0,w.A)(["\n  mutation updateProfile($input: updateProfileInput!) {\n    updateProfile(input: $input) {\n      error {\n        key\n        value\n      }\n      message\n      severity\n    }\n  }\n"]))),$=(0,f.J1)(v||(v=(0,w.A)(["\n  mutation removeCard($input: objIdInput!) {\n    removeCard(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"]))),k=(0,f.J1)(x||(x=(0,w.A)(["\n  mutation removeInvoice($input: objIdInput!) {\n    removeInvoice(input: $input) {\n      hasError\n      message\n      severity\n    }\n  }\n"])))},903:(e,r,n)=>{n.d(r,{Cx:()=>l,E9:()=>i,O5:()=>t,V8:()=>o,X5:()=>s,jK:()=>d,nM:()=>c,uk:()=>u});var a=n(899);const t=a.Ik().shape({first_name:a.Yj().min(3).max(150).required("Please enter first name"),last_name:a.Yj().min(3).max(150).required("Please enter last name"),email:a.Yj().max(150).email("Please indicate a valid email address.").required("Please enter email address."),password:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number"),confirmPassword:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number").oneOf([a.KR("password"),null],"Passwords don't match!").required("Please enter confirm password")}),s=a.Ik().shape({email:a.Yj().email("Must be a valid email").max(150).required("Email is required"),password:a.Yj().required("Please enter password")}).required(),i=a.Ik().shape({email:a.Yj().email("Must be a valid email").max(150).required("Email is required")}).required(),o=a.Ik().shape({password:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number"),confirmPassword:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number").oneOf([a.KR("password"),null],"Passwords don't match!").required("Please enter confirm password")}),d=a.Ik().shape({sticker_number:a.Yj().max(30).required("Strike number is required"),reference_number:a.Yj().max(30).required("Reference Number is required"),equipment_type:a.Yj().max(30).required("Equipment type is required"),equipment_description:a.Yj().max(200).required("Equipment description is required"),make:a.Yj().max(150).required("Make is required"),serial_number:a.Yj().max(100).required("Serial number is required"),year_of_manufacturing:a.Yj().max(30).required("Year of manufacturing is required"),plant_number:a.Yj().max(100).required("Plant number is required"),location_of_equipment:a.Yj().max(30).required("Location of the equipment is required"),owner_business_name:a.Yj().max(150).required("Owner's Business name is required"),owner_business_address:a.Yj().max(200).required("Owner's Business address is required"),details:a.Yj().max(200).required("details is required"),standard_specification:a.Yj().max(200).required("Standard Specification is required"),business_name:a.Yj().max(100).required("Business name is required"),business_address:a.Yj().max(200).required("Business address is required"),inspection_date:a.Yj().max(30).required("Inspection date is required"),inspection_next_date:a.Yj().max(30).required("Inspection next date is required"),inspector_name:a.Yj().max(100).required("Inspector's name is required"),resultStatus:a.Yj().required("resultStatus is required")}),u=a.Ik().shape({name:a.Yj().max(150).required("Card holder name is required"),iqama_number:a.Yj().max(100).required("Iqama Number is required"),issue_date:a.Yj().max(30).required("Issue date is required"),expiry_date:a.Yj().max(30).required("Expiry date is required"),certified_as:a.Yj().max(100).required("Certified as is required"),company:a.Yj().max(100).required("Company as is required"),examiner:a.Yj().max(100).required("Examiner as is required"),profile_pic:a.Yj().nullable().notRequired()}),l=a.Ik().shape({first_name:a.Yj().min(3).max(150).required("Please enter first name"),last_name:a.Yj().min(3).max(150).required("Please enter last name"),role:a.zM().nullable().notRequired()}),c=a.Ik().shape({oldPassword:a.Yj().required("Please Enter your old password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number"),password:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number"),confirmPassword:a.Yj().required("Please Enter your password").min(6,"Your password must be longer than 6 characters.").max(18).matches(/^(?=.{6,})/,"Must Contain 6 Characters").matches(/^(?=.*[a-z])(?=.*[A-Z])/,"Must Contain One Uppercase, One Lowercase").matches(/^(?=.*[!@#\$%\^&\*])/,"Must Contain One Special Case Character").matches(/^(?=.{6,20}$)\D*\d/,"Must Contain One Number").oneOf([a.KR("password"),null],"Passwords don't match!").required("Please enter confirm password")})},3632:(e,r,n)=>{n.d(r,{A:()=>s});var a=n(9662),t=n(579);const s=(0,a.A)((0,t.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},5940:(e,r,n)=>{n.d(r,{A:()=>s});var a=n(9662),t=n(579);const s=(0,a.A)((0,t.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff")},1787:(e,r,n)=>{n.d(r,{A:()=>A});var a=n(8587),t=n(8168),s=n(5043),i=n(8387),o=n(8606),d=n(6803),u=n(5865),l=n(1053),c=n(5213),m=n(4535),p=n(7056),h=n(2400);function v(e){return(0,h.Ay)("MuiInputAdornment",e)}const x=(0,p.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var w,f=n(2876),b=n(579);const j=["children","className","component","disablePointerEvents","disableTypography","position","variant"],q=(0,m.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:n}=e;return[r.root,r["position".concat((0,d.A)(n.position))],!0===n.disablePointerEvents&&r.disablePointerEvents,r[n.variant]]}})((e=>{let{theme:r,ownerState:n}=e;return(0,t.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(r.vars||r).palette.action.active},"filled"===n.variant&&{["&.".concat(x.positionStart,"&:not(.").concat(x.hiddenLabel,")")]:{marginTop:16}},"start"===n.position&&{marginRight:8},"end"===n.position&&{marginLeft:8},!0===n.disablePointerEvents&&{pointerEvents:"none"})})),A=s.forwardRef((function(e,r){const n=(0,f.A)({props:e,name:"MuiInputAdornment"}),{children:m,className:p,component:h="div",disablePointerEvents:x=!1,disableTypography:A=!1,position:C,variant:g}=n,y=(0,a.A)(n,j),P=(0,c.A)()||{};let I=g;g&&P.variant,P&&!I&&(I=P.variant);const M=(0,t.A)({},n,{hiddenLabel:P.hiddenLabel,size:P.size,disablePointerEvents:x,position:C,variant:I}),Y=(e=>{const{classes:r,disablePointerEvents:n,hiddenLabel:a,position:t,size:s,variant:i}=e,u={root:["root",n&&"disablePointerEvents",t&&"position".concat((0,d.A)(t)),i,a&&"hiddenLabel",s&&"size".concat((0,d.A)(s))]};return(0,o.A)(u,v,r)})(M);return(0,b.jsx)(l.A.Provider,{value:null,children:(0,b.jsx)(q,(0,t.A)({as:h,ownerState:M,className:(0,i.A)(Y.root,p),ref:r},y,{children:"string"!==typeof m||A?(0,b.jsxs)(s.Fragment,{children:["start"===C?w||(w=(0,b.jsx)("span",{className:"notranslate",children:"\u200b"})):null,m]}):(0,b.jsx)(u.A,{color:"text.secondary",children:m})}))})}))},1881:(e,r,n)=>{n.d(r,{n:()=>l});var a=n(6326),t=n(48),s=n(2277),i=n(4902),o=n(36),d=n(7832),u=n(5190);function l(e,r){var n=(0,u.m)(null===r||void 0===r?void 0:r.client);(0,o.D$)(e,o.KG.Mutation);var l=t.useState({called:!1,loading:!1,client:n}),c=l[0],m=l[1],p=t.useRef({result:c,mutationId:0,isMounted:!0,client:n,mutation:e,options:r});Object.assign(p.current,{client:n,options:r,mutation:e});var h=t.useCallback((function(e){void 0===e&&(e={});var r=p.current,n=r.options,t=r.mutation,o=(0,a.Cl)((0,a.Cl)({},n),{mutation:t}),u=e.client||p.current.client;p.current.result.loading||o.ignoreResults||!p.current.isMounted||m(p.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:u});var l=++p.current.mutationId,c=(0,s.l)(o,e);return u.mutate(c).then((function(r){var n,a,t=r.data,s=r.errors,o=s&&s.length>0?new d.K4({graphQLErrors:s}):void 0,h=e.onError||(null===(n=p.current.options)||void 0===n?void 0:n.onError);if(o&&h&&h(o,c),l===p.current.mutationId&&!c.ignoreResults){var v={called:!0,loading:!1,data:t,error:o,client:u};p.current.isMounted&&!(0,i.L)(p.current.result,v)&&m(p.current.result=v)}var x=e.onCompleted||(null===(a=p.current.options)||void 0===a?void 0:a.onCompleted);return o||null===x||void 0===x||x(r.data,c),r})).catch((function(r){var n;if(l===p.current.mutationId&&p.current.isMounted){var a={loading:!1,error:r,data:void 0,called:!0,client:u};(0,i.L)(p.current.result,a)||m(p.current.result=a)}var t=e.onError||(null===(n=p.current.options)||void 0===n?void 0:n.onError);if(t)return t(r,c),{data:void 0,errors:r};throw r}))}),[]),v=t.useCallback((function(){if(p.current.isMounted){var e={called:!1,loading:!1,client:n};Object.assign(p.current,{mutationId:0,result:e}),m(e)}}),[]);return t.useEffect((function(){return p.current.isMounted=!0,function(){p.current.isMounted=!1}}),[]),[h,(0,a.Cl)({reset:v},c)]}}}]);
//# sourceMappingURL=967.c74e62d7.chunk.js.map