"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[429],{9429:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(5043),s=n(4858),i=n(8403),a=n(6410),u=n(1881),c=n(3216),o=n(2671),l=n(929),_=n(903),f=n(9351),d=n(7343),p=n(2010),b=n(579);const m=()=>{const e=(0,c.Zp)(),{id:t}=(0,c.g)(),[n,m]=r.useState(!0),[v,y]=r.useState("error"),[S,h]=r.useState(""),[g,k]=r.useState(!1),[C,q]=r.useState(""),[x,j]=r.useState(""),[w,D]=(0,r.useState)(""),[P,{loading:E,error:O,data:A}]=(0,a._)(p.A),[I,{loading:M,error:Q,data:R}]=(0,u.n)(f.G6),{register:B,handleSubmit:F,setError:N,setValue:T,formState:{errors:V}}=(0,s.mN)({resolver:(0,i.t)(_.jK)});r.useEffect((()=>{P({variables:{input:{_id:t}}})}),[t,P]),r.useEffect((()=>{if(!E&&!O&&A){const t=A.findInvoiceByID;if(t.response){const{sticker_number:e,reference_number:n,equipment_type:r,equipment_description:s,make:i,serial_number:a,year_of_manufacturing:u,plant_number:c,location_of_equipment:o,owner_business_name:l,owner_business_address:_,details:f,standard_specification:d,business_name:p,business_address:b,inspection_date:v,inspection_next_date:y,inspector_name:S,resultStatus:h}=t.response;T("sticker_number",e),T("reference_number",n),T("equipment_type",r),T("equipment_description",s),T("make",i),T("serial_number",a),T("year_of_manufacturing",u),T("plant_number",c),T("location_of_equipment",o),T("owner_business_name",l),T("owner_business_address",_),T("details",f),T("standard_specification",d),T("business_name",p),T("business_address",b),T("inspector_name",S),T("resultStatus",h),D(h),q(v),j(y),m(!1)}else e("/certificate")}}),[E,O,A,e,m,T]);return r.useEffect((()=>{if(!M&&!Q&&R){const t=R.updateInvoice;y(t.severity),h(t.message),(0,d.ft)(t.error,N),k(!1),!t.error&&t.severity.includes("success")&&e("/certificate")}}),[M,Q,R,y,h,N,e]),n?(0,b.jsx)(o.A,{}):(0,b.jsx)(l.A,{handleSubmit:F,onSubmitHandler:(e,n)=>{n.preventDefault();let r=e.inspection_date.split("/");r="".concat(r[2],"-").concat(r[1],"-").concat(r[0]);let s=e.inspection_next_date.split("/");s="".concat(s[2],"-").concat(s[1],"-").concat(s[0]),I({variables:{input:{...e,inspection_date:r,inspection_next_date:s,_id:t}}})},register:B,errors:V,severity:v,message:S,isSubmitted:g,title:"Edit Certificate",submitBtnTxt:"Submit",insDate:C,insNextDate:x,resultStatusDefaultValue:w})}},6410:(e,t,n)=>{n.d(t,{_:()=>o});var r=n(6326),s=n(48),i=n(2277),a=n(8250),u=n(5190),c=["refetch","reobserve","fetchMore","updateQuery","startPolling","subscribeToMore"];function o(e,t){var n,o=s.useRef(),l=s.useRef(),_=s.useRef(),f=(0,i.l)(t,o.current||{}),d=null!==(n=null===f||void 0===f?void 0:f.query)&&void 0!==n?n:e;l.current=t,_.current=d;var p=(0,a.k)((0,u.m)(t&&t.client),d),b=p.useQuery((0,r.Cl)((0,r.Cl)({},f),{skip:!o.current})),m=b.observable.options.initialFetchPolicy||p.getDefaultFetchPolicy(),v=Object.assign(b,{called:!!o.current}),y=s.useMemo((function(){for(var e={},t=function(t){var n=v[t];e[t]=function(){return o.current||(o.current=Object.create(null),p.forceUpdateState()),n.apply(this,arguments)}},n=0,r=c;n<r.length;n++){t(r[n])}return e}),[]);Object.assign(v,y);var S=s.useCallback((function(e){o.current=e?(0,r.Cl)((0,r.Cl)({},e),{fetchPolicy:e.fetchPolicy||m}):{fetchPolicy:m};var t=(0,i.l)(l.current,(0,r.Cl)({query:_.current},o.current)),n=p.executeQuery((0,r.Cl)((0,r.Cl)({},t),{skip:!1})).then((function(e){return Object.assign(e,y)}));return n.catch((function(){})),n}),[]);return[S,v]}}}]);
//# sourceMappingURL=429.2e22a5f5.chunk.js.map